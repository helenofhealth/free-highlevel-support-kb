<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Hydration event in custom code in Funnels</title>
  
  <!-- Standard Meta Tags -->
  <meta name="title" content="Hydration event in custom code in Funnels">
  <meta name="description" content=" A new custom event hydrationDone has been introduced in the preview. This event will be dispatched when the funnel/website preview has completed its hydration so a user can run specific custom code post hydration.     Why this is needed? Previous...">
  <meta name="keywords" content="custom code,  custom JS,  hydration">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Hydration event in custom code in Funnels">
  <meta property="og:description" content=" A new custom event hydrationDone has been introduced in the preview. This event will be dispatched when the funnel/website preview has completed its hydration so a user can run specific custom code post hydration.     Why this is needed? Previous...">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://help.gohighlevel.com/support/solutions/articles/155000002421-hydration-event-in-custom-code-in-funnels">
</head>
<body>
  <div class="date_updated">
    <p><strong>Date Updated:</strong> 2024-05-15T19:43:14.000Z</p>
  </div>
  <div class="container">
    <div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><span dir="ltr" style="font-size: 14px;">A new custom event <code class="c-mrkdwn__code" data-stringify-type="code" style="box-sizing: inherit; --saf-0: rgba(var(--sk_foreground_low,29,28,29),.13); border: 1px solid var(--saf-0); color: rgb(var(--dt_color-plt-flamingo-70)); overflow-wrap: break-word; word-break: normal; tab-size: 4; border-radius: 3px; padding: 2px 3px 1px; font-size: 14px; line-height: 1.50001; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace !important;">hydrationDone</code> has been introduced in the preview. This event will be dispatched when the funnel/website preview has completed its hydration so a user can run specific custom code post hydration.</span></div><div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><br></div><div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><strong dir="ltr">Why this is needed?</strong><br style="box-sizing: inherit;"><span dir="ltr" style="font-size: 14px;">Previously, users might have faced issues where their custom scripts would execute before our preview hydration had completed. This timing mismatch could lead to incorrect execution flow and hinder the intended functionality of their custom code.&nbsp;</span></div><div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><br></div><div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><strong>How did we solve this?</strong></div><ol><li><span style="font-size: 14px;">By dispatching the 'hydrationDone' event after complete hydration of the preview is completed, we've effectively eliminated this source of contention.</span></li><li><span dir="ltr" style="font-size: 14px;">Users can add an event listener on the <code class="c-mrkdwn__code" data-stringify-type="code" style="box-sizing: inherit; --saf-0: rgba(var(--sk_foreground_low,29,28,29),.13); border: 1px solid var(--saf-0); color: rgb(var(--dt_color-plt-flamingo-70)); overflow-wrap: break-word; word-break: normal; tab-size: 4; border-radius: 3px; padding: 2px 3px 1px; font-size: 14px; line-height: 1.50001; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace !important;">hydrationDone</code> event and execute their following code. This is especially useful if they are trying to manipulate DOM content.</span></li></ol><div class="p-rich_text_section" dir="ltr" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><strong>How to use?</strong></div><ul class="p-rich_text_list p-rich_text_list__bullet" data-border="0" data-indent="0" data-stringify-type="unordered-list" style="box-sizing: inherit; margin-bottom: 0px; margin-left: 0px; padding: 0px; list-style-type: none; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><li data-stringify-border="0" data-stringify-indent="0" dir="ltr" style="box-sizing: inherit; margin-bottom: 0px; margin-left: 28px; list-style-type: none;"><span style="font-size: 14px;">Add a code element in the builder</span></li><li data-stringify-border="0" data-stringify-indent="0" dir="ltr" style="box-sizing: inherit; margin-bottom: 0px; margin-left: 28px; list-style-type: none;"><span style="font-size: 14px;">Listen the <code class="c-mrkdwn__code" data-stringify-type="code" style="box-sizing: inherit; --saf-0: rgba(var(--sk_foreground_low,29,28,29),.13); border: 1px solid var(--saf-0); color: rgb(var(--dt_color-plt-flamingo-70)); overflow-wrap: break-word; word-break: normal; tab-size: 4; border-radius: 3px; padding: 2px 3px 1px; font-size: 14px; line-height: 1.50001; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace !important;">hydrationDone</code> event like below</span></li></ul><pre class="c-mrkdwn__pre" data-stringify-type="pre" style="box-sizing: inherit; margin-bottom: 4px; margin-left: 0px; padding: 8px; --saf-0: rgba(var(--sk_foreground_low,29,28,29),.13); border: 1px solid var(--saf-0); overflow-wrap: break-word; word-break: normal; tab-size: 4; border-radius: 4px; font-size: 12px; line-height: 1.50001; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-weight: 400; text-align: left; text-indent: 0px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace !important;"><div class="p-rich_text_block--no-overflow" dir="ltr" style="box-sizing: inherit; overflow: hidden;"> document.addEventListener(
  "hydrationDone",
  () =&gt; {
     // Add custom javascript here
})</div></pre><ul class="p-rich_text_list p-rich_text_list__bullet" data-border="0" data-indent="0" data-stringify-type="unordered-list" style="box-sizing: inherit; margin-bottom: 0px; margin-left: 0px; padding: 0px; list-style-type: none; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><li data-stringify-border="0" data-stringify-indent="0" dir="ltr" style="box-sizing: inherit; margin-bottom: 0px; margin-left: 28px; list-style-type: none;"><span style="font-size: 14px;">Once the preview DOM content is loaded and hydration event is received, the custom code will run without any issue or race condition.</span></li></ul><div class="p-rich_text_section" style="box-sizing: inherit; counter-reset: list-0 0 list-1 0 list-2 0 list-3 0 list-4 0 list-5 0 list-6 0 list-7 0 list-8 0 list-9 0; color: rgb(29, 28, 29); font-family: Slack-Lato, Slack-Fractions, appleLogo, sans-serif; font-size: 15px; font-weight: 400; text-align: left; text-indent: 0px;"><b data-stringify-type="bold" style="box-sizing: inherit;"><i data-stringify-type="italic" dir="ltr" style="box-sizing: inherit;">Note</i></b><i data-stringify-type="italic" dir="ltr" style="box-sizing: inherit;">: Optimise javascript may need to be disabled if user's custom code is critical on page load, as it delays the hydration event if there is no user interaction.</i></div><p><br></p><p><i data-stringify-type="italic" dir="ltr" style="box-sizing: inherit;"><span style="font-size: 14px;">This is how your custom Javascript/ HTML should look like:</span><br class="Apple-interchange-newline"><img src="https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/155026075581/original/JUAS8WOxjL8rYexXLNPsz4ITdqJTBToK8A.png?1715782328" class="fr-fil fr-dib fw-lightbox-img" data-id="155026075581" style="box-sizing: border-box; border: 0px; max-width: 100%; cursor: pointer; padding: 0px 1px; margin-bottom: 5px; margin-left: 0px; display: block; text-align: left; color: rgb(0, 0, 0); font-family: -apple-system, &quot;system-ui&quot;, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 14px; font-weight: 400; text-indent: 0px; width: auto;" data-attachment="[object Object]" data-index="0"></i></p>
            

<script type="text/javascript">
  const attachment_error_image = (attachment) => {
    const parentElement = attachment.parentElement;
    const defaultIcon = `<span class="icon-file-empty"></span><span class="fw-attachment-ext">${attachment.dataset.extension}</span>`;
    parentElement.innerHTML = defaultIcon;
  };
</script>
  </div>
</body>
</html>